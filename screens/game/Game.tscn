[gd_scene load_steps=20 format=3 uid="uid://cggeh34coe4qt"]

[ext_resource type="Script" path="res://screens/game/game.gd" id="1_jps0w"]
[ext_resource type="Texture2D" uid="uid://cd6ro0dexjo3i" path="res://assets/backgrounds/farback.png" id="2_gbcxf"]
[ext_resource type="PackedScene" uid="uid://qxqjpmnblj6s" path="res://ui/lobby/Lobby.tscn" id="2_s6vv1"]
[ext_resource type="Texture2D" uid="uid://dnospyg3a7rjl" path="res://assets/backgrounds/city.png" id="3_7b8eh"]
[ext_resource type="Texture2D" uid="uid://b1dkh7kul7584" path="res://assets/tilesets/bricks.png" id="4_w4l26"]
[ext_resource type="Texture2D" uid="uid://d3jb88tu4ixlq" path="res://assets/podium/podium.png" id="5_de0vn"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_ldipo"]
texture = ExtResource("4_w4l26")
texture_region_size = Vector2i(32, 32)
0:0/0 = 0
1:0/0 = 0

[sub_resource type="TileSet" id="TileSet_lupwe"]
tile_size = Vector2i(32, 32)
sources/0 = SubResource("TileSetAtlasSource_ldipo")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_a0o8r"]
size = Vector2(20109, 74.755)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bc8r8"]
size = Vector2(20, 261)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kjjoc"]
size = Vector2(40, 30)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bjnxg"]
size = Vector2(40, 40)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_cm1gh"]
size = Vector2(40, 20)

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_k6ytn"]
properties/0/path = NodePath(".:enabled")
properties/0/spawn = false
properties/0/replication_mode = 2

[sub_resource type="GDScript" id="GDScript_hyonx"]
script/source = "extends Area2D
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hm8p6"]
size = Vector2(239, 326)

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_7ekuq"]
properties/0/path = NodePath(".:text")
properties/0/spawn = true
properties/0/replication_mode = 2

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_vfqir"]
properties/0/path = NodePath(".:visible")
properties/0/spawn = false
properties/0/replication_mode = 2
properties/1/path = NodePath("TimeLeft:text")
properties/1/spawn = false
properties/1/replication_mode = 2

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_txejc"]
properties/0/path = NodePath(".:visible")
properties/0/spawn = false
properties/0/replication_mode = 2
properties/1/path = NodePath(".:modulate")
properties/1/spawn = false
properties/1/replication_mode = 2

[node name="Game" type="Node2D"]
script = ExtResource("1_jps0w")

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]

[node name="Sky" type="ParallaxLayer" parent="ParallaxBackground"]
texture_filter = 1
texture_repeat = 2
position = Vector2(160, 90)
motion_scale = Vector2(0, 0)

[node name="Sky" type="Sprite2D" parent="ParallaxBackground/Sky"]
self_modulate = Color(0.4, 0.4, 0.4, 1)
texture = ExtResource("2_gbcxf")

[node name="City" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2(0.2, 0.1)
motion_mirroring = Vector2(400, 0)

[node name="City" type="Sprite2D" parent="ParallaxBackground/City"]
texture = ExtResource("3_7b8eh")
offset = Vector2(160, 80)

[node name="TileMap" type="TileMap" parent="."]
position = Vector2(0, 2)
tile_set = SubResource("TileSet_lupwe")
format = 2
layer_0/tile_data = PackedInt32Array(327679, 0, 0, 262144, 0, 0, 262145, 0, 0, 262146, 0, 0, 262147, 0, 0, 327678, 0, 0, 327677, 0, 0, 327676, 0, 0, 327675, 0, 0, 327674, 0, 0, 327673, 0, 0, 327672, 0, 0, 327671, 0, 0, 327670, 0, 0, 327669, 0, 0, 327668, 0, 0, 327667, 0, 0, 327666, 0, 0, 327665, 0, 0, 327664, 0, 0, 327663, 0, 0, 327662, 0, 0, 327661, 0, 0, 327660, 0, 0, 327659, 0, 0, 327658, 0, 0, 327657, 0, 0, 327656, 0, 0, 327655, 0, 0, 327654, 0, 0, 327653, 0, 0, 393189, 0, 0, 393190, 0, 0, 393191, 0, 0, 393192, 0, 0, 393193, 0, 0, 393194, 0, 0, 393195, 0, 0, 393196, 0, 0, 393197, 0, 0, 393198, 0, 0, 393199, 0, 0, 393200, 0, 0, 393201, 0, 0, 393202, 0, 0, 393203, 0, 0, 393204, 0, 0, 393205, 0, 0, 393206, 0, 0, 393207, 0, 0, 393208, 0, 0, 393209, 0, 0, 393210, 0, 0, 393211, 0, 0, 393212, 0, 0, 393213, 0, 0, 393214, 0, 0, 393215, 0, 0, 327680, 0, 0, 327681, 0, 0, 327682, 0, 0, 327683, 0, 0, 327684, 0, 0, 327685, 0, 0, 327686, 0, 0, 327687, 0, 0, 327688, 0, 0, 327689, 0, 0, 327690, 0, 0, 327691, 0, 0, 327692, 0, 0, 327693, 0, 0, 327694, 0, 0, 327695, 0, 0, 327696, 0, 0, 327697, 0, 0, 327698, 0, 0, 327699, 0, 0, 327700, 0, 0, 262148, 0, 0, 262149, 0, 0, 262150, 0, 0, 262151, 0, 0, 262152, 0, 0, 262153, 0, 0, 262154, 0, 0, 262155, 0, 0, 262156, 0, 0, 262157, 0, 0, 262158, 0, 0, 262159, 0, 0, 262160, 0, 0, 262161, 0, 0, 262162, 0, 0, 262163, 0, 0, 262164, 0, 0, 262165, 0, 0, 262166, 0, 0, 262167, 0, 0, 262168, 0, 0, 262169, 0, 0, 262170, 0, 0, 262171, 0, 0, 262172, 0, 0, 262173, 0, 0, 262174, 0, 0, 262175, 0, 0, 262176, 0, 0, 262177, 0, 0, 262178, 0, 0, 262179, 0, 0, 262180, 0, 0, 262181, 0, 0, 262182, 0, 0, 262183, 0, 0, 262184, 0, 0, 262185, 0, 0, 262186, 0, 0, 262187, 0, 0, 262188, 0, 0, 262189, 0, 0, 262190, 0, 0, 262191, 0, 0, 262192, 0, 0, 262193, 0, 0, 262194, 0, 0, 262195, 0, 0, 262196, 0, 0, 262197, 0, 0, 327701, 0, 0, 327702, 0, 0, 327703, 0, 0, 327704, 0, 0, 327705, 0, 0, 327706, 0, 0, 327707, 0, 0, 327708, 0, 0, 327709, 0, 0, 327710, 0, 0, 327711, 0, 0, 327712, 0, 0, 327713, 0, 0, 327714, 0, 0, 327715, 0, 0, 327716, 0, 0, 327717, 0, 0, 327718, 0, 0, 327719, 0, 0, 327720, 0, 0, 327721, 0, 0, 327722, 0, 0, 327723, 0, 0, 327724, 0, 0, 327725, 0, 0, 327726, 0, 0, 327727, 0, 0, 327728, 0, 0, 327729, 0, 0, 327730, 0, 0, 327731, 0, 0, 327732, 0, 0, 327733, 0, 0, 262198, 0, 0, 327734, 0, 0, 262199, 0, 0, 327735, 0, 0, 262200, 0, 0, 327736, 0, 0, 262201, 0, 0, 327737, 0, 0, 262202, 0, 0, 327738, 0, 0, 262203, 0, 0, 327739, 0, 0, 262204, 0, 0, 327740, 0, 0, 262205, 0, 0, 327741, 0, 0, 262206, 0, 0, 327742, 0, 0, 262207, 0, 0, 327743, 0, 0, 262208, 0, 0, 327744, 0, 0, 262209, 0, 0, 327745, 0, 0, 262210, 0, 0, 327746, 0, 0, 262211, 0, 0, 327747, 0, 0, 262212, 0, 0, 327748, 0, 0, 262213, 0, 0, 327749, 0, 0, 262214, 0, 0, 327750, 0, 0, 262215, 0, 0, 327751, 0, 0, 262216, 0, 0, 327752, 0, 0, 262217, 0, 0, 327753, 0, 0, 262218, 0, 0, 327754, 0, 0, 262219, 0, 0, 327755, 0, 0, 262220, 0, 0, 327756, 0, 0, 262221, 0, 0, 327757, 0, 0, 262222, 0, 0, 327758, 0, 0, 262223, 0, 0, 327759, 0, 0, 262224, 0, 0, 327760, 0, 0, 262225, 0, 0, 327761, 0, 0, 262226, 0, 0, 327762, 0, 0, 262227, 0, 0, 327763, 0, 0, 262228, 0, 0, 327764, 0, 0, 262229, 0, 0, 327765, 0, 0, 262230, 0, 0, 327766, 0, 0, 262231, 0, 0, 327767, 0, 0, 262232, 0, 0, 327768, 0, 0, 262233, 0, 0, 327769, 0, 0, 262117, 65536, 0, 262118, 65536, 0, 262119, 65536, 0, 262120, 65536, 0, 262121, 65536, 0, 262122, 65536, 0, 262123, 65536, 0, 262124, 65536, 0, 262125, 65536, 0, 262126, 65536, 0, 262127, 65536, 0, 262128, 65536, 0, 262129, 65536, 0, 262130, 65536, 0, 262131, 65536, 0, 262132, 65536, 0, 262133, 65536, 0, 262134, 65536, 0, 262135, 65536, 0, 262136, 65536, 0, 262137, 65536, 0, 262138, 65536, 0, 262139, 65536, 0, 262140, 65536, 0, 262141, 65536, 0, 262142, 65536, 0, 262143, 65536, 0, 196608, 65536, 0, 196609, 65536, 0, 196610, 65536, 0, 196611, 65536, 0, 196612, 65536, 0, 196613, 65536, 0, 196614, 65536, 0, 196615, 65536, 0, 196616, 65536, 0, 196617, 65536, 0, 196618, 65536, 0, 196619, 65536, 0, 196620, 65536, 0, 196621, 65536, 0, 196622, 65536, 0, 196623, 65536, 0, 196624, 65536, 0, 196625, 65536, 0, 196626, 65536, 0, 196627, 65536, 0, 196628, 65536, 0, 196629, 65536, 0, 196630, 65536, 0, 196631, 65536, 0, 196632, 65536, 0, 196633, 65536, 0, 196634, 65536, 0, 196635, 65536, 0, 196636, 65536, 0, 196637, 65536, 0, 196638, 65536, 0, 196639, 65536, 0, 196640, 65536, 0, 196641, 65536, 0, 196642, 65536, 0, 196643, 65536, 0, 196644, 65536, 0, 196645, 65536, 0, 196646, 65536, 0, 196647, 65536, 0, 196648, 65536, 0, 196649, 65536, 0, 196650, 65536, 0, 196651, 65536, 0, 196652, 65536, 0, 196653, 65536, 0, 196654, 65536, 0, 196655, 65536, 0, 196656, 65536, 0, 196657, 65536, 0, 196658, 65536, 0, 196659, 65536, 0, 196660, 65536, 0, 196661, 65536, 0, 196662, 65536, 0, 196663, 65536, 0, 196664, 65536, 0, 196665, 65536, 0, 196666, 65536, 0, 196667, 65536, 0, 196668, 65536, 0, 196669, 65536, 0, 196670, 65536, 0, 196671, 65536, 0, 196672, 65536, 0, 196673, 65536, 0, 196674, 65536, 0, 196675, 65536, 0, 196676, 65536, 0, 196677, 65536, 0, 196678, 65536, 0, 196679, 65536, 0, 196680, 65536, 0, 196681, 65536, 0, 196682, 65536, 0, 196683, 65536, 0, 196684, 65536, 0, 196685, 65536, 0, 196686, 65536, 0, 196687, 65536, 0, 196688, 65536, 0, 196689, 65536, 0, 196690, 65536, 0, 196691, 65536, 0, 196692, 65536, 0, 196693, 65536, 0, 196694, 65536, 0, 196695, 65536, 0, 196696, 65536, 0, 196697, 65536, 0)

[node name="Ground" type="StaticBody2D" parent="."]
position = Vector2(6939, 159)
scale = Vector2(1, 0.694)
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="Ground"]
position = Vector2(2243.5, -8.73198)
shape = SubResource("RectangleShape2D_a0o8r")

[node name="Barrier" type="StaticBody2D" parent="."]
position = Vector2(83, 7)
metadata/_edit_group_ = true

[node name="Shape" type="CollisionShape2D" parent="Barrier"]
position = Vector2(0, 84.5)
shape = SubResource("RectangleShape2D_bc8r8")

[node name="Podium" type="StaticBody2D" parent="."]
position = Vector2(-499, 102)
metadata/_edit_group_ = true

[node name="Sprite2D" type="Sprite2D" parent="Podium"]
position = Vector2(8, -1)
texture = ExtResource("5_de0vn")

[node name="SecondPlace" type="CollisionShape2D" parent="Podium"]
position = Vector2(-32, 10)
shape = SubResource("RectangleShape2D_kjjoc")

[node name="SecondPlaceMarker" type="Marker2D" parent="Podium/SecondPlace"]
position = Vector2(0, -50)

[node name="Label" type="Label" parent="Podium/SecondPlace"]
offset_left = -5.0
offset_top = -11.0
offset_right = 35.0
offset_bottom = 12.0
text = "II"

[node name="FirstPlace" type="CollisionShape2D" parent="Podium"]
position = Vector2(8, 5)
shape = SubResource("RectangleShape2D_bjnxg")

[node name="FirstPlaceMarker" type="Marker2D" parent="Podium/FirstPlace"]
position = Vector2(0, -55)

[node name="Label" type="Label" parent="Podium/FirstPlace"]
offset_left = -3.0
offset_top = -13.0
offset_right = 37.0
offset_bottom = 10.0
text = "I"

[node name="ThirdPlace" type="CollisionShape2D" parent="Podium"]
position = Vector2(48, 15)
shape = SubResource("RectangleShape2D_cm1gh")

[node name="ThirdPlaceMarker" type="Marker2D" parent="Podium/ThirdPlace"]
position = Vector2(0, -45)

[node name="Label" type="Label" parent="Podium/ThirdPlace"]
offset_left = -7.0
offset_top = -11.0
offset_right = 33.0
offset_bottom = 12.0
text = "III"

[node name="LosersMarker" type="Marker2D" parent="Podium"]
position = Vector2(103, -6)

[node name="PodiumCamera" type="Camera2D" parent="Podium"]
position = Vector2(8, 11)
offset = Vector2(20, -48)
enabled = false

[node name="Synchronizer" type="MultiplayerSynchronizer" parent="Podium/PodiumCamera"]
replication_config = SubResource("SceneReplicationConfig_k6ytn")

[node name="FinishLine" type="Area2D" parent="."]
position = Vector2(1954, -2)
collision_layer = 0
collision_mask = 2
script = SubResource("GDScript_hyonx")
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="FinishLine"]
position = Vector2(84.5, 66)
shape = SubResource("RectangleShape2D_hm8p6")

[node name="Players" type="Node2D" parent="."]
unique_name_in_owner = true
position = Vector2(29, 61)

[node name="Avatars" type="Node2D" parent="."]
position = Vector2(29, 61)

[node name="AvatarsSpawner" type="MultiplayerSpawner" parent="."]
_spawnable_scenes = PackedStringArray("res://avatar/Avatar.tscn")
spawn_path = NodePath("../Avatars")

[node name="Controllers" type="Node" parent="."]

[node name="ControllerSpawner" type="MultiplayerSpawner" parent="Controllers"]
_spawnable_scenes = PackedStringArray("res://controller/Controller.tscn")
spawn_path = NodePath("..")

[node name="Control" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 320.0
offset_bottom = 180.0

[node name="GameUILayer" type="CanvasLayer" parent="Control"]
visible = false

[node name="Snow" type="CPUParticles2D" parent="Control/GameUILayer"]
position = Vector2(159, -37)
amount = 96
lifetime = 3.0
preprocess = 3.0
emission_shape = 3
emission_rect_extents = Vector2(320, 1)
gravity = Vector2(-50, 100)
damping_min = 10.0
damping_max = 10.0

[node name="Countdown" type="Control" parent="Control/GameUILayer"]
layout_mode = 3
anchors_preset = 10
anchor_right = 1.0
offset_bottom = 50.0
grow_horizontal = 2

[node name="Panel" type="Panel" parent="Control/GameUILayer/Countdown"]
custom_minimum_size = Vector2(100, 50)
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
grow_horizontal = 2

[node name="CenterContainer" type="CenterContainer" parent="Control/GameUILayer/Countdown/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="CountdownLabel" type="Label" parent="Control/GameUILayer/Countdown/Panel/CenterContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 40
text = "5"

[node name="Synchronizer" type="MultiplayerSynchronizer" parent="Control/GameUILayer/Countdown/Panel/CenterContainer/CountdownLabel"]
replication_config = SubResource("SceneReplicationConfig_7ekuq")

[node name="TimeLeftContainer" type="HBoxContainer" parent="Control/GameUILayer"]
visible = false
offset_right = 40.0
offset_bottom = 40.0

[node name="TimeLeftLabel" type="Label" parent="Control/GameUILayer/TimeLeftContainer"]
layout_mode = 2
text = " Time left - "

[node name="TimeLeft" type="Label" parent="Control/GameUILayer/TimeLeftContainer"]
layout_mode = 2
text = "30"

[node name="Synchronizer" type="MultiplayerSynchronizer" parent="Control/GameUILayer/TimeLeftContainer"]
replication_config = SubResource("SceneReplicationConfig_vfqir")

[node name="Overlay" type="ColorRect" parent="Control/GameUILayer"]
visible = false
modulate = Color(1, 1, 1, 0)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="Synchronizer" type="MultiplayerSynchronizer" parent="Control/GameUILayer/Overlay"]
replication_config = SubResource("SceneReplicationConfig_txejc")

[node name="Lobby" parent="Control" instance=ExtResource("2_s6vv1")]
visible = false
layout_mode = 1

[connection signal="body_entered" from="FinishLine" to="." method="_on_finish_line_body_entered"]
[connection signal="player_ready" from="Control/Lobby" to="." method="player_ready"]
